{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/arumaldo/KnowledgeReset/KnowledgeReset/crawler-admin/app/crawler/jobs/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { graphql, GET_CRAWL_JOBS, CrawlJob } from '@/lib/api';\nimport Link from 'next/link';\nimport { Button } from '@/components/ui/button';\n\nexport default function CrawlJobsPage() {\n    const [crawlJobs, setCrawlJobs] = useState<CrawlJob[]>([]);\n    const [loading, setLoading] = useState(true);\n    const [selectedAppId, setSelectedAppId] = useState<string>('');\n\n    useEffect(() => {\n        loadCrawlJobs();\n    }, [selectedAppId]);\n\n    const loadCrawlJobs = async () => {\n        try {\n            const variables: any = { limit: 50 };\n            if (selectedAppId) {\n                variables.appId = selectedAppId;\n            }\n            const data = await graphql.request<{ crawlJobs: CrawlJob[] }>(GET_CRAWL_JOBS, variables);\n            setCrawlJobs(data.crawlJobs);\n        } catch (error) {\n            console.error('Failed to load crawl jobs:', error);\n        } finally {\n            setLoading(false);\n        }\n    };\n\n    const getStatusBadge = (status: string) => {\n        const statusColors: Record<string, string> = {\n            pending: 'bg-yellow-100 text-yellow-800',\n            running: 'bg-blue-100 text-blue-800',\n            completed: 'bg-green-100 text-green-800',\n            failed: 'bg-red-100 text-red-800',\n        };\n        return (\n            <span className={`px-2 py-1 rounded text-xs font-medium ${statusColors[status] || 'bg-gray-100 text-gray-800'}`}>\n                {status.toUpperCase()}\n            </span>\n        );\n    };\n\n    return (\n        <div className=\"container mx-auto py-6\">\n            <div className=\"flex flex-col gap-6\">\n                {/* Page Header */}\n                <div className=\"flex flex-wrap items-center gap-5 justify-between\">\n                    <div className=\"flex flex-col justify-center gap-2\">\n                        <h1 className=\"text-xl font-semibold leading-none text-gray-900\">\n                            Crawl Jobs\n                        </h1>\n                        <div className=\"flex items-center flex-wrap gap-1.5 font-medium\">\n                            <span className=\"text-md text-gray-600\">\n                                Monitor crawl job status and history\n                            </span>\n                        </div>\n                    </div>\n                    <div className=\"flex items-center gap-2.5\">\n                        <Link href=\"/crawler\">\n                            <Button variant=\"outline\" size=\"sm\">\n                                Back to Dashboard\n                            </Button>\n                        </Link>\n                    </div>\n                </div>\n\n                {/* Crawl Jobs Table */}\n                <div className=\"card\">\n                    <div className=\"card-header\">\n                        <h3 className=\"card-title\">All Crawl Jobs</h3>\n                    </div>\n                    <div className=\"card-body\">\n                        <div className=\"table-responsive\">\n                            <table className=\"table table-auto\">\n                                <thead>\n                                    <tr>\n                                        <th className=\"min-w-[150px]\">Job ID</th>\n                                        <th className=\"min-w-[100px]\">Status</th>\n                                        <th className=\"min-w-[150px]\">Start Time</th>\n                                        <th className=\"min-w-[150px]\">End Time</th>\n                                        <th className=\"min-w-[100px]\">Pages</th>\n                                        <th className=\"min-w-[100px]\">Errors</th>\n                                    </tr>\n                                </thead>\n                                <tbody>\n                                    {loading ? (\n                                        <tr>\n                                            <td colSpan={6} className=\"text-center py-10 text-gray-500\">\n                                                Loading crawl jobs...\n                                            </td>\n                                        </tr>\n                                    ) : crawlJobs.length === 0 ? (\n                                        <tr>\n                                            <td colSpan={6} className=\"text-center py-10 text-gray-500\">\n                                                No crawl jobs found\n                                            </td>\n                                        </tr>\n                                    ) : (\n                                        crawlJobs.map((job) => (\n                                            <tr key={job.id}>\n                                                <td className=\"font-mono text-xs text-gray-600\">\n                                                    {job.id.substring(0, 8)}...\n                                                </td>\n                                                <td>{getStatusBadge(job.status)}</td>\n                                                <td className=\"text-gray-600\">\n                                                    {job.startTime ? new Date(job.startTime).toLocaleString() : '-'}\n                                                </td>\n                                                <td className=\"text-gray-600\">\n                                                    {job.endTime ? new Date(job.endTime).toLocaleString() : '-'}\n                                                </td>\n                                                <td className=\"text-gray-900 font-medium\">\n                                                    {job.pagesProcessed || 0}\n                                                </td>\n                                                <td>\n                                                    {job.errors && job.errors.length > 0 ? (\n                                                        <span className=\"text-red-600 font-medium\">\n                                                            {job.errors.length}\n                                                        </span>\n                                                    ) : (\n                                                        <span className=\"text-gray-400\">0</span>\n                                                    )}\n                                                </td>\n                                            </tr>\n                                        ))\n                                    )}\n                                </tbody>\n                            </table>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}